{% extends 'layouts/bulma-ufs.layout.njk' %}
{% set pageTitle = APPLICATION_RESOURCES_COST_TITLE_TAG + GLOBAL_TAG_TITLE_SUFFIX %}
{% set projectName = projectName if projectName %}
{% set allResourcesValues = allResourcesValues if allResourcesValues %}
{% set backLinkContents =  [{url:'/prototypes/application-v2/', text:'Back to application'}] %}

{% block content %}

    {% call components.bulmaRow() %}
        {% call components.bulmaColumnAny(size='is-two-thirds') %}
            {{ components.captionHeading(text=APPLICATION_RESOURCES_COST_TITLE, caption=projectName) }}
        {%- endcall %}
    {%- endcall %}

    {% call components.bulmaRow() %}

        {% call components.bulmaColumnAny(size='is-full') %}

            <details class="govuk-details" data-module="govuk-details">
                <summary class="govuk-details__summary">
                    <span class="govuk-details__summary-text">Guidance on resources and cost</span>
                </summary>
                <div class="govuk-details__text">
                    <p>This section should contain a full breakdown of the top-level costs involved with your project.</p>
                    <p>It is not necessary to breakdown costs further than the items below although you must submit full details after initial review.</p>
                </div>
            </details>

        {%- endcall %}

    {%- endcall %}

    {% call components.form(action='/prototypes/application-v2/resources-and-cost', method='POST',name='formResourcesTeam') %}


        {% call components.bulmaRow(extraClass='u-space-b10') %}

            {% call components.bulmaColumnAny(size='is-full') %}

                <table class="govuk-table">

                    <thead>
                        <tr>
                            <th class="govuk-table__header">Funding type</th>
                            <th class="govuk-table__header govuk-table__header--numeric">Full economic<br>cost (£)</th>
                            <th class="govuk-table__header govuk-table__header--numeric">Funding <br>percentage (%)</th>
                            <th class="govuk-table__header govuk-table__header--numeric">Funding <br>contribution (£)</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                           <td class="govuk-table__cell govuk-table__cell--middle">Directly incurred</td>
                           <td class="govuk-table__cell govuk-table__cell--numeric">
                               <div class="govuk-form-group u-space-y5">
                                   <label class="govuk-label govuk-visually-hidden" for="directlyIncurredCost">Directly incurred full economic costs</label>
                                   <input class="govuk-input govuk-input--width-5" id="directlyIncurredCost" type="text" name="directlyIncurredCost" value="0">
                               </div>
                           </td>
                           <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">80</td>
                           <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">0</td>
                        </tr>

                        <tr>
                            <td class="govuk-table__cell govuk-table__cell--middle">Directly allocated</td>
                            <td class="govuk-table__cell govuk-table__cell--numeric">
                                <div class="govuk-form-group u-space-y5">
                                    <label class="govuk-label govuk-visually-hidden" for="directlyAllocatedCost">Directly allocated full economic costs</label>
                                    <input class="govuk-input govuk-input--width-5" id="directlyAllocatedCost" type="text" name="directlyAllocatedCost" value="0">
                                </div>
                            </td>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">80</td>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">0</td>
                        </tr>

                        <tr>
                            <td class="govuk-table__cell govuk-table__cell--middle">Indirect costs</td>
                            <td class="govuk-table__cell govuk-table__cell--numeric">
                                <div class="govuk-form-group u-space-y5">
                                    <label class="govuk-label govuk-visually-hidden" for="indirectlCost">Indirect full economic costs</label>
                                    <input class="govuk-input govuk-input--width-5" id="indirectlCost" type="text" name="indirectlCost" value="0">
                                </div>
                            </td>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">80</td>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">0</td>
                        </tr>

                        <tr>
                            <td class="govuk-table__cell govuk-table__cell--middle">Exceptions</td>
                            <td class="govuk-table__cell govuk-table__cell--numeric">
                                <div class="govuk-form-group u-space-y5">
                                    <label class="govuk-label govuk-visually-hidden" for="exceptionCost">Exceptional full economic costs</label>
                                    <input class="govuk-input govuk-input--width-5" id="exceptionCost" type="text" name="exceptionCost" value="0">
                                </div>
                            </td>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">80</td>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--numeric">0</td>
                        </tr>

                        <tr>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--borderless"><strong>Total contribution from project</strong></td>
                            <td class="govuk-table__cell govuk-table__cell--numeric govuk-table__cell--borderless"><strong>£0</strong></td>
                            <td class="" colspan="2">&nbsp;</td>
                        </tr>

                        <tr>
                            <td class="govuk-table__cell govuk-table__cell--middle govuk-table__cell--borderless"><strong>Total funding requested</strong></td>
                            <td class="govuk-table__cell govuk-table__cell--numeric govuk-table__cell--borderless"><strong>£0</strong></td>
                            <td class="" colspan="2">&nbsp;</td>
                        </tr>


                    </tbody>

                </table>

            {%- endcall %}

        {%- endcall %}

        {% call components.bulmaRow(extraClass='u-space-t30') %}

            {% call components.bulmaColumnAny(size='is-full') %}

                {% call components.formGroup() %}
                    <div class="application-item">
                        <div class="application-item__contents">
                            <fieldset class="govuk-fieldset" aria-describedby="markAsComplete">
                                <legend class="govuk-fieldset__legend govuk-visually-hidden">
                                    <h3 class="govuk-fieldset__heading" id="">Mark as complete</h3>
                                </legend>
                                <div class="govuk-checkboxes">
                                    <div class="govuk-checkboxes__item">
                                        <input class="govuk-checkboxes__input" id="markAsComplete" name="isComplete" type="checkbox" {% if allResourcesValues.isComplete == 'on' %} checked{% endif %}>
                                        <label class="govuk-label govuk-checkboxes__label" for="markAsComplete">Mark as complete</label>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                {%- endcall %}

            {%- endcall %}

        {%- endcall %}

        {% call components.bulmaRow() %}
            {% call components.bulmaColumnAny(size='is-full') %}
                <div class="application-controls govuk-clearfix">
                    {{ components.button(text='Save and return', extraClass="application-controls__submit")}}
                </div>
            {%- endcall %}
        {%- endcall %}

    {%- endcall %}

{% endblock %}

{% block bodyScripts %}
    {#<script>
      Zepto(function($){
        $('#totalStaffCost, #totalTravelCost, #totalEquipmentCost, #totalOtherCost, #totalIndirectCost').on('blur', function(event) {
          let totalValue = parseInt($('#totalStaffCost').val(), 10) + parseInt($('#totalTravelCost').val(), 10) + parseInt($('#totalEquipmentCost').val(), 10) + parseInt($('#totalOtherCost').val(), 10) + parseInt($('#totalIndirectCost').val(), 10);
          $('#totalCostsOutput').html('£'+totalValue);
          event.preventDefault();
        });
      })
    </script>#}
{% endblock %}
