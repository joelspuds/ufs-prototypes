{% extends 'layouts/bulma-ufs.layout.njk' %}
{% set pageTitle = 'Eligibility - your programme topic' + GLOBAL_TAG_TITLE_SUFFIX %}
{% set projectName = projectName if projectName %}
{% set programmeTopic = programmeTopic if programmeTopic %}
{% set backLinkContents =  [{url:'/prototypes/application-v2/', text:'Back to application'}] %}
{% set programmeTopicIsComplete = programmeTopicIsComplete if programmeTopicIsComplete %}

{% block content %}

    {% call components.bulmaRow() %}
        {% call components.bulmaColumnAny(size='is-two-thirds') %}
            {{ components.captionHeading(text='Eligibility - your programme topic', caption=projectName) }}
        {%- endcall %}
    {%- endcall %}

    {% call components.form(action='/prototypes/application-v2/eligibility-research-area', method='POST',name='formProgrammeTopic') %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='is-full') %}

                <div class="govuk-character-count" data-module="govuk-character-count" data-maxlength="200">
                    <div class="govuk-form-group ">
                        <label class="govuk-label govuk-label--s govuk-!-font-weight-bold" for="programmeTopic">You need to state at least one research topic, which is/are yours?</label>
                        <details class="govuk-details u-space-t20" data-module="govuk-details" role="group">
                            <summary class="govuk-details__summary" role="button" aria-controls="details-content-0" aria-expanded="false">
                                <span class="govuk-details__summary-text">What you should include in your answer?</span>
                            </summary>
                            <div class="govuk-details__text" id="details-content-0" aria-hidden="true">
                                <p class="govuk-body">The primary research focus for your programme idea must be in the arts and humanities. It could be bringing arts and humanities research together with non-AHRC funded disciplines. But you have to demonstrate suitable links to the world of arts and humanities and that this remains your primary focus. In the answer box, you may select more than one topic (there is a more detailed list of the AHRC disciplines on the website listing for this Opportunity). If you do that, identify your primary area by entering it first on your list.</p>
                                <p class="govuk-body">Our main topic areas are:</p>
                                <ul class="govuk-list govuk-list--bullet">
                                    <li>Archaeology</li>
                                    <li>Classics</li>
                                    <li>Cultural and museum studies</li>
                                    <li>Development studies</li>
                                    <li>History</li>
                                    <li>Information and communication technologies</li>
                                    <li>Law and legal studies</li>
                                    <li>Library and information studies</li>
                                    <li>Philosophy</li>
                                    <li>Political science and international studies</li>
                                    <li>Theology, divinity and religion</li>
                                    <li>Dance</li>
                                    <li>Design</li>
                                    <li>Drama and theatre studies</li>
                                    <li>Media</li>
                                    <li>Music</li>
                                    <li>Languages and literature</li>
                                    <li>Linguistics</li>
                                    <li>Visual arts.</li>
                                </ul>
                            </div>
                        </details>
                        <textarea class="govuk-textarea govuk-js-character-count" name="programmeTopic" id="programmeTopic" rows="18">{{ programmeTopic }}</textarea>
                        <p><span id="wordCount" class="govuk-hint govuk-character-count__message" aria-live="polite">You have 50 words remaining</span></p>
                    </div>
                </div>

            {%- endcall %}

        {%- endcall %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='is-full') %}

                {% call components.formGroup() %}
                    <div class="application-item">
                        <div class="application-item__contents">
                            <fieldset class="govuk-fieldset" aria-describedby="markAsComplete">
                                <legend class="govuk-fieldset__legend govuk-visually-hidden">
                                    <h3 class="govuk-fieldset__heading" id="">Mark as complete</h3>
                                </legend>
                                <div class="govuk-checkboxes">
                                    <div class="govuk-checkboxes__item">
                                        <input class="govuk-checkboxes__input" id="markAsComplete" name="isComplete" type="checkbox" {% if programmeTopicIsComplete %} checked{% endif %}>
                                        <label class="govuk-label govuk-checkboxes__label" for="markAsComplete">Mark as complete</label>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                {%- endcall %}

            {%- endcall %}

        {%- endcall %}

        {% call components.bulmaRow() %}

            {% call components.bulmaColumnAny(size='is-full') %}

                {% call components.formGroup() %}
                    <div class="application-controls govuk-clearfix">
                        {{ components.button(text='Save and return', extraClass="application-controls__submit")}}
                    </div>

                {%- endcall %}

            {%- endcall %}

        {%- endcall %}

    {%- endcall %}

{% endblock %}
{% block bodyScripts %}
    <script>
      ;(function(){
        let wordcounter = document.getElementById('programmeTopic');
        let counteroutputFoot = document.getElementById('wordCount');
        let words;
        const limit = 50;

        function countemwords(){
          words = (wordcounter.value == '')? 0 : wordcounter.value.split(' ').length;
          let remainder = limit - words;
          if (words < limit) {
            wordcounter.classList.remove('govuk-textarea--error');
            counteroutputFoot.innerHTML = 'You have ' + remainder + ' words remaining';
          } else {
            let overCount = words - limit;
            wordcounter.classList.add('govuk-textarea--error');
            counteroutputFoot.innerHTML = '<span style="font-weight:700;color:red">You have ' +  overCount + ' words too many</span>';
          }
        }
        wordcounter.addEventListener('input', function(e){
          countemwords()
        }, false);
        document.addEventListener("DOMContentLoaded", function(event) {
          countemwords()
        }, false);
        window.addEventListener("load", function(event) {
          countemwords();
        }, false)
      })();
    </script>
{% endblock %}
